<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PWM Timer1 Modo Fase Correcta</title>
    <link rel="shortcut icon" href="..\Imagenes\Universidad-de-carabobo.png" />
    <!-- fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto&display=swap"
      rel="stylesheet"
    />
    <!-- CSS file -->
    <link rel="stylesheet" href="..\css\prueba.css" />
    <link rel="stylesheet" href="..\css\media-screen.css" />
    <link rel="stylesheet" href="..\css\descripcion-de-las-librerias.css" />
    <link rel="stylesheet" href="..\css\Manejo-de-la-pantalla-LCD.css" />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.1/css/all.css"
    />
    <link rel="stylesheet" href="..\css\como-agregar-librerias.css" />
    <!-- Js file -->
    <script src="../Js/prueba.js" defer></script>
    <script src="../Js/menu.js" defer></script>
    <script src="../Js/btn.js" defer></script>

    <!-- --------------------------------------------------------------------------------------------------------------- -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <!-- --------------------------------------------------------------------------------------------------------------- -->
  </head>

  <body>
    <style>
      p {
        margin: 0 !important;
      }
      ::-webkit-scrollbar {
        display: none;
      }
    </style>
    <!-- Top content -->
    <div class="top-content">
      <div class="icon-bar">
        <a class="microchip" href="../index.html">
          <i class="fas fa-microchip"></i>
        </a>
      </div>
      <label class="label"
        ><a href="../index.html">Microprocesadores UC</a></label
      >

      <div class="dropdow newDp inDevice">
        <a class="darkTheme" style="cursor: pointer"
          ><i class="fas fa-adjust" style="color: white"></i
        ></a>
      </div>

      <ul>
        <!-- Seccion de la teoria-->
        <div class="dropdow">
          <li class="dropbt"><a href="#">Teoria</a></li>

          <div class="dropdow-content">
            <div class="dropdow-content1">
              <a href="#" class="tema1"
                >Tema 1</i
              ></a>
              <ul>
                <a
                  href="#"
                  style="
                    border-bottom: 1px solid rgba(85, 85, 85, 0.014);
                    text-align: center;
                    background-color: #b5dfed;
                  "
                  >Sistemas microprogramables</a
                >
                <a href="Dispositivos-digitales-microprogramables.html">Microcontroladores/Microprocesadores</a>
              </ul>
            </div>

            <div class="dropdow-content2">
              <a href="#">Tema 2</a>

              <ul>
                <a
                  href="#"
                  style="
                    border-bottom: 1px solid rgba(85, 85, 85, 0.014);
                    text-align: center;
                    background-color: #b5dfed;
                  "
                  >Arquitectura de un sistema microprogramable</a
                >
                <a href="ATmega328P.html" >Arquitectura y Caracteristicas</a>
              </ul>
            </div>

            <div class="dropdow-content3">
              <a href="#">Tema 3</a>

              <ul>
                <a
                  href="#"
                  style="
                    border-bottom: 1px solid rgba(85, 85, 85, 0.014);
                    text-align: center;
                    background-color: #b5dfed;
                  "
                  >Temporizaciones e interrupciones</a
                >
                <a href="Timer-0.html">Timer 0</a>
                <a href="Timer-1.html">Timer 1</a>
                <a href="Timer-2.html">Timer 2</a>
                <a href="Manejo-de-interrupciones.html"
                  >Manejo de interrupciones</a
                >
                <a href="Modulación-por-ancho-de-pulso.html"
                  >Modulación por ancho de pulso <i>PWM</i></a
                >
                <a href="Timer0-Modo-Fase-Correcta.html"
                  >PWM Timer0 Modo Fase Correcta</a
                >
                <a href="Timer0-Modo-Rapido.html">PWM Timer0 Modo Rapido</a>
                <a href="Timer1-Modo-Fase-Correcta.html"
                  >PWM Timer1 Modo Fase Correcta</a
                >
                <a href="Timer1-Modo-Rapido.html">PWM Timer1 Modo Rapido</a>
              </ul>
            </div>

            <div class="dropdow-content4">
              <a href="#">Tema 4</a>

              <ul>
                <a
                  href="#"
                  style="
                    border-bottom: 1px solid rgba(85, 85, 85, 0.014);
                    text-align: center;
                    background-color: #b5dfed;
                  "
                  >Conversión Digital/Analógica - Analógica/Digital</a
                >
                <a href="Convertidor-ADC.html">Convertidor ADC</a>
              </ul>
            </div>

            <div class="dropdow-content5">
              <a href="#">Tema 5</a>

              <ul>
                <a
                  href="#"
                  style="
                    border-bottom: 1px solid rgba(85, 85, 85, 0.014);
                    text-align: center;
                    background-color: #b5dfed;
                  "
                  >Comunicación serial</a
                >
                <a href="USART.html">Comunicación Serial USART</a>
              </ul>
            </div>
          </div>
        </div>
        <!-- Seccion de laboratorio -->
        <div class="dropdow">
          <li class="dropbt"><a href="#">Laboratorio</a></li>

          <div class="dropdow-content">
                <a href="Instalacion-de-Proteus-8.5.html"
                  >Instalación de proteus 8.5</a
                >

                <a href="como-agregar-librerias-a-proteus-8.5.html"
                  >Como agregar librerias adicionales en Proteus 8.5</a
                >
                <a href="Descripcion-y-manejo.html"
                  >Descripcion y manejo de las librerias</a
                >
                <a href="IDE-Arduino.html">IDE software Arduino</a>
                <a href="IDE-AVR-Studio-7.html">IDE AVR Studio 7</a>
                <a href="Programar-Arduino-AVRStudio.html"
                  >Programar el Arduino con AVR Studio 7</a
                >
                <a href="introduccion-al-lenguaje-de-programacion-en-C.html"
                  >Introduccion al lenguaje de programacion en C</a
                >
                <a href="manejo-del-display-7seg.html"
                  >Manejo del display 7 Segmentos</a
                >
                <a href="Manejo-de-la-pantalla-LCD.html"
                  >Manejo de la pantalla LCD</a
                >
              
          </div>
        </div>
        <!-- Seccion de descarga -->
        <div class="dropdow">
          <li class="dropbt"><a href="#">Descargas</a></li>
          <div class="dropdow-content" >
            <a
              href="https://mega.nz/folder/PJBnTSaB#Sb-LwH7cwkHzQJKevcpG1g"
              target="_blank"
              >Descargar archivos en pdf</a
            >
            <a
              href="https://mega.nz/folder/fE5AAQhY#IVL100RFiLY0-649gnbLAw"
              target="_blank"
              >Practicas del Laboratorio</a
            >
          </div>
        </div>
        <!---->
        <div class="dropdow newDp">
          <li>
            <a class="darkTheme" style="cursor: pointer"
              ><i class="fas fa-adjust" style="color: white"></i
            ></a>
          </li>
          <div class="dropdow-content"></div>
        </div>
      </ul>
    </div>

    <!-- Haburguer menu -->
    <div id="nav-icon2">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>

    <!-- Menu in devices -->

    <div class="content-device">
      <ul>
        <div class="dropdow">
          <li class="dropbt" onclick="myFunction()">Teoria</li>

          <div class="dropdow-content device">
            <a href="#" class="tema0 tema"
              >Tema 1: Sistemas microprogramables</a
            >

            <div class="subContent" style="margin-left: 2%; ">
              <a style="padding-right: 0;"
                class="before"
                href="Dispositivos-digitales-microprogramables.html"
                >Microcontroladores/Microprocesadores</a
              >
            </div>

            <a class="tema1 tema" href="#"
              >Tema 2: Arquitectura de un sistema microprogramable</a
            >

            <div class="subContent" style="margin-left: 5%">
              <a class="before" href="ATmega328P.html"
                >Arquitectura y Caracteristicas</a
              >
            </div>

            <a class="tema2 tema" href="#"
              >Tema 3: Temporizaciones e interrupciones</a
            >

            <div class="subContent" style="margin-left: 5%">
              <a class="before" href="Timer-0.html">Timer 0</a>
              <a class="before" href="Timer-1.html">Timer 1</a>
              <a class="before" href="Timer-2.html">Timer 2</a>
              <a class="before" href="Manejo-de-interrupciones.html"
                >Manejo de interrupciones</a
              >
              <a class="before" href="Modulación-por-ancho-de-pulso.html"
                >Modulación por ancho de pulso <i>PWM</i></a
              >
              <a class="before" href="Timer0-Modo-Fase-Correcta.html"
                >PWM Timer0 Modo Fase Correcta</a
              >
              <a class="before" href="Timer0-Modo-Rapido.html"
                >PWM Timer0 Modo Rapido</a
              >
              <a class="before" href="Timer1-Modo-Fase-Correcta.html"
                >PWM Timer1 Modo Fase Correcta</a
              >
              <a class="before" href="Timer1-Modo-Rapido.html"
                >PWM Timer1 Modo Rapido</a
              >
            </div>

            <a class="tema3 tema" href="#"
              >Tema 4: Conversión Digital/Analógica - Analógica/Digital</a
            >

            <div class="subContent" style="margin-left: 5%">
              <a class="before" href="Convertidor-ADC.html">Convertidor ADC</a>
            </div>

            <a class="tema4 tema" href="#">Tema 5: Comunicación serial </a>

            <div class="subContent" style="margin-left: 5%">
              <a class="before" href="USART.html">Comunicación Serial USART</a>
            </div>
          </div>
        </div>
        <div class="dropdow">
          <li class="dropbt" onclick="myFunction2()">Laboratorio</li>

          <div class="dropdow-content device2">
            <!---->
            <a class="tema5 tema" href="#">Primeros pasos</a>
            <div class="subContent" style="margin-left: 5%">
              <a class="before" href="Instalacion-de-Proteus-8.5.html"
                >Instalación de proteus 8.5</a
              >
              <a class="before" href="como-agregar-librerias-a-proteus-8.5.html"
                >Como agregar librerias adicionales en Proteus 8.5</a
              >
              <a class="before" href="Descripcion-y-manejo.html"
                >Descripcion y manejo de las librerias</a
              >
              <a class="before" href="Descripcion-y-manejo.html"
                >IDE software Arduino</a
              >
              <a class="before" href="IDE-AVR-Studio-7.html"
                >IDE AVR Studio 7</a
              >
              <a style="padding-right: 0;" class="before" href="Programar-Arduino-AVRStudio.html"
                >Programar el Arduino con AVR Studio 7</a
              >
              <a
                class="before"
                href="introduccion-al-lenguaje-de-programacion-en-C.html"
                >Introduccion al lenguaje de programacion en C</a
              >
              <a class="before" href="manejo-del-display-7seg.html"
                >Manejo del display 7 Segmentos</a
              >
              <a class="before" href="Manejo-de-la-pantalla-LCD.html"
                >Manejo de la pantalla LCD</a
              >
            </div>

            <a href="practica1.html">Práctica 1</a>
            <a href="practica2.html">Práctica 2</a>
            <a href="practica3.html">Práctica 3</a>
            <a href="practica4.html">Práctica 4</a>
            <a href="practica5.html">Práctica 5</a>

            <!---->
          </div>
        </div>
        <div class="dropdow">
          <li class="dropbt" onclick="myFunction3()">Descargas</li>
          <div class="dropdow-content device3">
            <a
              href="https://mega.nz/folder/PJBnTSaB#Sb-LwH7cwkHzQJKevcpG1g"
              target="_blank"
              >Descargar archivos en pdf</a
            >
            <a
              href="https://mega.nz/folder/fE5AAQhY#IVL100RFiLY0-649gnbLAw"
              target="_blank"
              >Practicas del Laboratorio</a
            >
          </div>
        </div>
      </ul>
    </div>

    <!-- sidenav content -->
    <div class="sidenav2">
      <label
        ><a href="#" style="color: black"
          >PWM Timer1 Modo Fase Correcta</a
        ></label
      >

      <ul>
        <li class="afterICon">
          <a class="icon icon-solid icon-arrow-down ai0">PWM Timer 1</a>
        </li>
        <ul>
          <li><a href="#PWM-timer1">PWM Modo: Fase correcta</a></li>
          <li>
            <a href="#frecuencia-periodo"
              >Frecuencia y periodo de la señal PWM</a
            >
          </li>
        </ul>

        <li class="afterICon">
          <a class="icon icon-solid icon-arrow-down ai1"
            >Obtener la señal PWM</a
          >
        </li>
        <ul>
          <li><a href="#obtenerSeñalPWM">Obtención de la señal</a></li>
          <li>
            <a href="#señalNoInvertida">Señal no invertida</a>
          </li>
          <li><a href="#señalInvertida">Señal Invertida</a></li>
          <li><a href="#anchoDePulso">Ancho de pulso</a></li>
        </ul>

        <li class="afterICon">
          <a class="icon icon-solid icon-arrow-down ai2"
            >Configuración de registros</a
          >
        </li>
        <ul>
          <li><a href="#TCCR1A">Registro TCCR1A</a></li>
          <li>
            <a href="#TCCR1B">Registro TCCR1B</a>
          </li>
          <li><a href="#Resolucion">Registro TCCR1A y TCCR1B: Resolución</a></li>
          <li><a href="#OCR1A-OCR1B">Registro OCR1A y Registro OCR1B</a></li>
        </ul>

        <li class="afterICon">
          <a class="icon icon-solid icon-arrow-down ai3">Ejemplo</a>
        </li>
        <ul>
          <li><a href="#Descripcion">Descripción</a></li>
          <li><a href="#Diagrama-circuital">Diagrama circuital</a></li>
          <li><a href="#codigoEnC">Código en C</a></li>
          <li>
            <a href="#operacion0">Modo de operación 0, ancho de pulso fijo</a>
          </li>
          <li>
            <a href="#operacion1"
              >Modo de operación 1, ancho de pulso variable</a
            >
          </li>
          <li><a href="#operacion2">Modo de operación 2, control del Servomotor</a></li>
        </ul>
      </ul>
    </div>

    <!-- content -->
    <div class="content">
      <!--title content -->
      <div class="h1-content  container" style="align-items: center;">
        <!-- Columna 1 -->
         <div class="col your-item2 desktopCol" style="width: 30%;">
           <img
                 src="../Imagenes/Facultad-de-ingenieria.png"
                 class="logo-footer"
                 style="display: block; margin: 15px auto; width: 85%;"
               />
               
         </div>
          <!-- Col 1 in Devices -->
         <div class="col deviceCol">
           <div class="container" style="flex-direction: row !important;">
             <div class="col your-item2">
               <img
                 src="../Imagenes/Facultad-de-ingenieria.png"
                 class="logo-footer"
                 style="display: block; margin: 15px auto; width: 70%;"
               />
             </div>
             <div class="col">
               <img
                 src="../Imagenes/ING_ELECT.jpg"
                 class="logo-footer"
                 style="display: block; margin: 15px auto; width: 50%;"
               />
             </div>
           </div>
         </div>
         <!-- Col 2 in Devices -->
         <div class="col deviceCol">
           <div style="font-family: 'Roboto', sans-serif; margin: 10px;">
             <p class="styleFooter" style="font-size: 12px !important;">Universidad de Carabobo</p>
             <p class="styleFooter" style="font-size: 12px !important;">Facultad de Ingeniería</p>
             <p class="styleFooter" style="font-size: 12px !important;">Escuela de Ingenieria Eléctrica</p>
             <p id="TTO" class="styleFooter" style="font-size: 12px !important;">Dpto. de Sistemas y Automática</p>
             
         </div>
         </div>
 
 
         <!-- Columna 2 -->
         <div class="col your-item2">
           <div class="desktopCol" style="font-family: 'Roboto', sans-serif; margin: 10px;">
             <p class="styleFooter" style="font-size: 12px !important;">Universidad de Carabobo</p>
             <p class="styleFooter" style="font-size: 12px !important;">Facultad de Ingeniería</p>
             <p class="styleFooter" style="font-size: 12px !important;">Escuela de Ingenieria Eléctrica</p>
             <p id="TTO" class="styleFooter" style="font-size: 12px !important;">Dpto. de Sistemas y Automática</p>
             
         </div>
           <div class="page-title">
             <h1 class="titleH7" style="font-size: 2em; margin-top: 15px; padding-top: 0;">
              PWM Timer1 Modo Fase Correcta
           </h1>
           </div>
           
         </div>
 
         <!-- Columna 3 -->
         <div class="col desktopCol" style="width: 30%;">
           <img
                 src="../Imagenes/ING_ELECT.jpg"
                 class="logo-footer"
                 style="display: block; margin: 15px auto; width: 65%;"
               />
         </div>
         
         
       </div>
      <!--main content -->
      <div class="main-content">
        <!-------------------------------------------------------------------------------------------->
        <h4 class="jump" id="PWM-timer1">PWM Modo: Fase correcta</h4>
        <p>
            La modulación de ancho de pulso rápido o el PWM modo fase 
            correcta (WGM13: 0 = 1, 2, 3, 10 u 11) proporciona una opción 
            de generación de forma de onda PWM fase correcta de alta resolución. 
            El PWM fase correcta, así como el modo PWM de fase y frecuencia correcta, 
            esta basado en una operación de doble pendiente
        </p>
        <p>El contador (el registro TCNT1) es el temporizador del timer1, es el que irá 
            aumentando sus valores desde 0 hasta un valor máximo en el proceso de temporización 
            que dependerá de la resolución asignada:
        </p>
        <ul>
            <li>Si la resolución es de <span style="color: red;">8 bits</span> entonces el máximo será 255 (<span style="color: red;">TOP</span>) y el 
                registro TCNT1 aumentará sus valores desde 0 hasta 255
            </li>
            <li>
                Si la resolución es de <span style="color: red;">9 bits</span> entonces el máximo será 511(<span style="color: red;">TOP</span>) y 
                el registro TCNT1 aumentará sus valores de 0 a 511
            </li>
            <li>
                Si la resolución es de <span style="color: red;">10 bits</span>  entonces el máximo será 1023 (<span style="color: red;">TOP</span>) y el 
                registro TCNT1 aumentará sus valores de 0 a 1023
            </li>
        </ul>

        <p>
            En el PWM modo fase correcta, el registro TCNT1 irá de 0 hasta el valor 
            máximo (<span style="color: red;">TOP</span>) elegido, luego irá desde ese valor máximo 
            y retornará a 0; a este ir de 0 a su máximo y de su máximo a 0 le tomará un 
            tiempo que dependerá del pre escalador utilizado para el timer1, y ese tiempo 
            que le tome al registro TCNT1 para ir de 0 a su máximo y regresar de su máximo a 0 
            será el periodo de la señal PWM, al registro TCNT1 se lo puede imaginar como si 
            estuviese generando una onda triangular en el transcurso del tiempo
        </p>
        
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\pwm-timer1-pendiente.png"
          alt="PWM modo fase correcta Timer1"
          style="width: 75%"
          class="resp1"
        />
        <p style="text-align: center; padding: 10px 0; font-size: 13px">
          <i>Fuente: Elaboración propia</i>
        </p>

        <div class="note">
         <ul style="padding: 10px 5px 10px 25px;"> 
          <li>
            Debido a la característica simétrica de los modos PWM de doble
            pendiente, estos modos son los preferidos para aplicaciones basadas
            en control de motores
          </li>
          <li>
            Una cosa a tener en cuenta es que al pasar el registro TCNT1 de su 
            máximo a 0 es como si se desbordara, por lo cual se puede habilitar 
            el uso de la interrupción por desborde del  timer1
          </li>
        </ul>
        </div>
        <!-- -------------------------------------------------------------------------------------- -->
        <h3 class="jump" id="frecuencia-periodo" style="margin-top: 2%">
          Frecuancia y periodo de la señal PWM
        </h3>

        <p>
          Partiendo de lo estudiado en la sección del
          <a href="Timer-1.html" style="text-decoration: none">Timer1</a> en
          modo comparador se establece lo siguiente:
        </p>
        <h4>Configuración del Pre escalador:</h4>
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\TCCR1B.png"
          alt="configuracion del pre escalador"
          style="width: 65%"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Microcontrollers ATmega328P Datasheet</i>
        </p>
        <p>
          Recordando, la frecuencia de trabajo del MCU (𝐹<sub>𝐶𝑃𝑈</sub>) se
          divide por el pre escalador, con lo que se logra que el timer1 tarde
          un poco más en aumentar su valor en una unidad; el pre escalador puede
          tomar el valor de 1, 8, 64, 256 o 1024; estos valores se eligen
          programando los bits 0, 1 y 2 del registro TCCR1B.
        </p>
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\TCCR1B-table.png"
          alt="configuracion del pre escalador"
          style="width: 55%"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Microcontrollers ATmega328P Datasheet</i>
        </p>

        <p>
          Luego, el periodo y la frecuencia de la señal PWM vienen dadas por las
          siguientes expresiones:
        </p>

        <img
          class="resp65 respCenter"
          style="width: 30%; display: inline-block; margin-left: 8%"
          src="..\Imagenes\PWM-Timer1-faseCorrecta\periodo-de-la-señal.png"
          alt="Periodo de la señal PWM"
        />

        <img
          class="resp65 respCenter"
          style="width: 32%; display: inline-block; margin-left: 15%"
          src="..\Imagenes\PWM-Timer1-faseCorrecta\frec-de-la-señal.png"
          alt="frecuencia de la señal PWM"
        />

        <p>
            Si el pre escalador utilizado es, por ejemplo, de 1024 y la 𝐹<sub>𝐶𝑃𝑈</sub> = 16 𝑀𝐻𝑧, con una resolución de 10bits (<span style="color: red;">TOP</span> = 1023) el periodo de la señal PWM será: 
            𝑇<sub>𝑃𝑊𝑀</sub> = (2 ∗ 1024 ∗ 1023)/16𝑀𝐻𝑧 = 130,9 𝑚𝑠 por otra parte, la frecuencia de la señal PWM será el inverso del periodo, por lo que la frecuencia será igual a:
             𝐹<sub>𝑃𝑊𝑀</sub> = 1/𝑇<sub>𝑃𝑊𝑀</sub> = 1/(65,536 𝑚𝑠) ≅ 15,25 𝐻𝑧
        </p>
        <!-- -------------------------------------------------------------------------------------- -->
        <h3 class="jump" id="obtenerSeñalPWM">Obtención de la señal PWM</h3>
        <p>
            La señal PWM se genera partiendo de la configuración del timer1 
            en modo comparación o modo CTC, esta se genera cuando el valor 
            del  registro TCNT1, el que se encuentra incrementándose de unidad 
            en unidad, se iguala al valor almacenado en el registro OCR1A o 
            en el registro OCR1B (que, según la resolución utilizada, se 
            determina el valor máximo que se puede utilizar dado por el valor 
            TOP de cada resolución), cuando se utilizó el timer1 en modo 
            comparación al ocurrir esta igualdad el registro TCNT1 se 
            reiniciaba a 0, en el modo PWM fase correcta el registro TCNT1 no 
            se reiniciará tras ocurrir la igualdad sino que seguirá 
            incrementado sus valores hasta llegar a su máximo valor 
            (definido por la resolución) o decrementandose hasta su valor mínimo de 0
        </p>

        <p>
            La señal PWM generada se obtendrá en cualesquiera de los pines 
            OC1A o OC1B del ATmega328P, dependiendo si para la comparación 
            se utiliza el registro OCR1A o el registro OCR1B, a partir de 
            este momento se utilizará OC1x para los pines y OCR1x para los 
            registros de comparación donde x puede ser A o B
        </p>

        <div class="note">
          <p style="padding: 10px">
            El indicador de desbordamiento del temporizador/contador (TOV1) 
            se activa cada vez que el contador llega a su máximo valor (TOP). 
            Si la interrupción está habilitada, La rutina de interrupción se 
            puede utilizar para actualizar el valor de comparación
          </p>
        </div>
        <!-- -------------------------------------------------------------------------------------- -->
        <h3 style="margin-top: 2%" id="señalNoInvertida" class="jump">
          Obtención de la señal PWM: No invertida
        </h3>

        <p>
            En el modo PWM fase correcta, la unidad de comparación permite la 
            generación de formas de onda PWM en los pines OC1x. Esta puede 
            ser en forma invertida o en forma no invertida, estos pines deben 
            ser declarados como salidas digitales mediante sus registros DDRx respectivos
        </p>

        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\señalNoInvertida.png"
          alt="PWM modo fase correcta Timer1: señal no invertida"
          style="width: 60%"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Elaboración propia</i>
        </p>

        <p>
            Para la forma no invertida por el pin OC1x se obtendrá un alto 
            mientras el valor del registro TCNT1 sea menor al valor 
            almacenado en el registro OCR1x, al ocurrir la igualdad 
            entre los registros TCNT1 y OCR1x el estado del pin OC1x 
            cambiará a un bajo y se mantendrá así hasta que, cuando el 
            registro TCNT1, al disminuir de su máximo a 0 se haga igual 
            nuevamente al valor almacenado en registro OCR1x, momento 
            en el cual el estado del pin OC1x cambiará nuevamente a un 
            alto, el registro TCNT1 seguirá disminuyendo hacia 0, 
            luego volverá a incrementase hacia su máximo y cuando 
            nuevamente se haga igual al valor almacenado en el registro 
            OCR1x nuevamente por el pin OC1x se obtendrá un bajo y el ciclo se repetirá
        </p>
        <!-- -------------------------------------------------------------------------------------- -->
        <h3 style="margin-top: 2%" id="señalInvertida" class="jump">
          Obtención de la señal PWM: Invertida
        </h3>

        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\señalInvertida.png"
          alt="PWM modo fase correcta Timer1: señal invertida"
          style="width: 70%"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Elaboración propia</i>
        </p>
        <p>
            Para la forma invertida por el pin OC1x se obtendrá un bajo mientras el valor del 
            registro TCNT1 sea menor al valor almacenado en el registro OCR1x, al ocurrir 
            la igualdad entre los registros TCNT1 y OCR1x el estado del pin OC1x cambiará 
            a un alto y se mantendrá así hasta que, cuando el registro TCNT1, al disminuir 
            de su máximo a 0 se haga igual nuevamente al valor almacenado en registro OCR1x, 
            momento en el cual el estado del pin OC1x cambiará nuevamente a un bajo, el 
            registro TCNT1 seguirá disminuyendo hacia 0, luego volverá a incrementase hacia 
            su máximo y cuando nuevamente se haga igual al valor almacenado en el registro 
            OCR1x nuevamente por el pin OC1x se obtendrá un alto y el ciclo se repetirá
        </p>

        <!-- -------------------------------------------------------------------------------------- -->
        <h3 style="margin-top: 2%" id="anchoDePulso" class="jump">
          Obtención de la señal PWM: Modificación del ancho de pulso
        </h3>

        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\anchoDePulso.png"
          alt="PWM modo fase correcta Timer1: señal invertida"
          style="width: 70%"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Elaboración propia</i>
        </p>

        <p>
            Para modificar el ancho de pulso de la señal PWM solo hay que modificar 
            el valor almacenado en el registro OCR1x, con esto se logra que los 
            cambios de estado del pin OC1x sean en diferentes tiempos, por ejemplo  
            si se toma como referencia la imagen anterior para el nivel del 
            registro OCR1x, cambiando su nivel se obtendrá la señal PWM con 
            un ancho de pulso modificado pero <span style="color: red;">manteniendo constante su periodo</span>.
        </p>

        <!-- -------------------------------------------------------------------------------------- -->
        <h3 style="margin-top: 2%">Configuración de registros</h3>

        <p>
          Para programar el módulo PWM modo rápido con el timer0, se utilizan 2
          registros los que son: El registro TCCR1A y el registro TCCR1B
        </p>

        <!-- -------------------------------------------------------------------------------------- -->
        <h4 style="margin-top: 2%" id="TCCR1A" class="jump">Registro TCCR1A</h4>
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\TCCR1A.png"
          alt="configuracion del registro TCCR1A"
          style="width: 65%; padding: 15px 0"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Microcontrollers ATmega328P Datasheet</i>
        </p>

        <p>
            Los bits 7 y 6 (Para el pin OC1A) y los bits 5 y 4 
            (Para el pin OC1B) son para elegir que la obtención de 
            la señal PWM será por el pin OC1A/OC1B y si será en forma 
            no invertida o en forma invertida, mediante las combinaciones 
            de estos bits según se indica en la siguiente tabla
        </p>
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\TCCR1A-table.png"
          alt="configuracion del registro TCCR1A"
          style="width: 65%"
          class="resp1"
        />
        <p style="text-align: center; padding: 10px 0; font-size: 13px">
          <i>Fuente: Microcontrollers ATmega328P Datasheet</i>
        </p>

        <div class="note">
          <p style="padding: 10px">
            Si las combinaciones de estos bits son 10 la señal PWM obtenida 
            por el pin OC1A/OC1B será no invertida, si las combinaciones de 
            estos bits son 11 la señal PWM obtenida por el pin OC1A/OC1B será invertida
          </p>
        </div>

        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\TCCR1A-2.png"
          alt="configuracion del registro TCCR1A"
          style="width: 65%; padding: 15px 0"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Microcontrollers ATmega328P Datasheet</i>
        </p>
        <p>
            Los bits 1 y 0 junto con los bits 4 y 3 del registro 
            TCCR1B son con los cuales se elige el modo de obtener 
            las señales PWM, mediante las combinaciones de estos 
            bits se elige la resolución a utilizar para el módulo 
            PWM, según se indica en la siguiente tabla:
        </p>

        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\TCCR1A-table2.png"
          alt="configuracion del registro TCCR1A"
          style="width: 65%"
          class="resp1"
        />
        <p style="text-align: center; padding: 10px 0; font-size: 13px">
          <i>Fuente: Microcontrollers ATmega328P Datasheet</i>
        </p>

        <!-- -------------------------------------------------------------------------------------- -->
        <h4 style="margin-top: 2%" id="TCCR1B" class="jump">Registro TCCR1B</h4>

        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\TCCR1B2.png"
          alt="configuracion del TCCR1B"
          style="width: 65%"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Microcontrollers ATmega328P Datasheet</i>
        </p>

        <p>
            Los bits 7, 6, y 5 no se utilizarán en la obtención de la señal PWM por lo que se colocaran a cero
        </p>
        <p>
            El bit4 y el bit3 trabajan junto con los bits 1 y 0 del registro TCCR1A tal como se comentó anteriormente
        </p>
        <p>
            Los bits 2, 1 y 0 son para elegir el pre escalador a utilizar para obtener 
            la frecuencia de la señal PWM, las combinaciones de estos bits para los diversos 
            pre escaladores del timer1 son los que se indicaron anteriormente 
            (<a
            style="text-decoration: none"
            href="#frecuencia-periodo"
            >configuración del pre escalador</a
          >)
        </p>

        <!-- -------------------------------------------------------------------------------------- -->
        <h4 style="margin-top: 2%" id="Resolucion" class="jump">
            Registro TCCR1A y TCCR1B: Resolución
        </h4>

        <p>
            Las combinación de estos bits que se utilizaran para la generación de la 
            señal PWM modo fase correcta serán la primera, la segunda y la tercera, 
            las que están resaltadas en la figura:
        </p>

        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\TCCRx-table.png"
          alt="configuracion del registro TCCRx: Resolucion"
          style="width: 65%"
          class="resp1"
        />
        <p style="text-align: center; padding: 10px 0; font-size: 13px">
          <i>Fuente: Microcontrollers ATmega328P Datasheet</i>
        </p>

        <p>
            dependiendo de la resolución que se quiera utilizar se establece lo siguiente:
        </p>

        <ul>
            <li>
                <span style="color: red;">Para una resolución de 8 bits</span>, del registro TCCR1B su bit4 se pondrá a 0 y su bit3 se 
                pondrá a 0, del registro TCCR1A su bit1 se pondrá a 0 y su bit0 se pondrá a 1, <span style="color: red;">la combinación será 0001</span>
            </li>
            <li>
                <span style="color: blue;">Para una resolución de 9 bits</span>, del registro TCCR1B su bit4 se pondrá a 0 y su bit3 
                se pondrá a 0, del registro TCCR1A su bit1 se pondrá a 1 y su bit0 se pondrá a 0, 
                <span style="color: blue;">la combinación será 0010</span>
            </li>
            <li>
                <span style="color: green;">Para una resolución de 10 bits</span>, del registro TCCR1B su bit4 se pondrá a 0 y su bit3 
                se pondrá a 0, del registro TCCR1A su bit1 se pondrá a 1 y su bit0 se pondrá a 1, 
                <span style="color: green;">la combinación será 0011</span>
            </li>
        </ul>


        <!-- -------------------------------------------------------------------------------------- -->
        
        <h4 style="margin-top: 2%" id="OCR1A-OCR1B" class="jump">
          Registro OCR1A/OCR1B
        </h4>

        <p>
            El ancho de pulso en una señal PWM fase correcta no invertido se inicia cuando 
            el registro TCNT1, que esta incrementándose desde 0 al máximo, se iguala al 
            valor almacenado en el registro OCR1x, y terminará cuando él, al decrementarse 
            del máximo a cero, se vuelva a igualar al valor almacenado en el registro OCR1x, 
            por lo que el ancho de pulso  será igual a 2 veces el valor almacenado en el 
            registro OCR01x, el periodo de la señal PWM timer1 AVR fase correcta es 2 veces 
            el valor máximo que puede tener el registro TCNT1 esto es 2 * TOP, ya que va de 
            0 al máximo y luego vuelve del máximo a 0
        </p>

        <p>
            Se puede utilizar la siguiente formula para el ciclo de trabajo de la señal PWM en modo fase correcta:
        </p>
        <img
          class="resp1 respCenter"
          style="width: 55%; margin: 0 auto"
          src="..\Imagenes\PWM-Timer1-faseCorrecta\ciclo-de-trabajo.png"
          alt="ciclo de trabajo de la señal pwm"
        />
        <p>
          Donde el OCR1x puede representar el registro OCR1A o el registro OCR1B
          según el caso de trabajo
        </p>
        <p>
            Por ejemplo, si se quiere un ciclo de trabajo del 75% utilizando una resolución de 9bits, 
            se puede proceder de la siguiente manera:
        </p>
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\OCR1x.png"
          alt="configuracion del registro OCR1x"
          style="width: 80%"
          class="resp1"
        />

        <div class="note" style="margin: 2% 0">
          <p style="padding: 10px">
            Esto indica que si se quiere un ciclo de trabajo del 75% de la señal 
            PWM en el registro OCR1x se tendrá que cargar el valor de 383
          </p>
        </div>

        <!-- -------------------------------------------------------------------------------------- -->
        <h3 class="jump" id="Descripcion">
          Ejemplo
        </h3>

        <p>
            En este único ejemplo se presentarán distintas maneras de utilizar el modo PWM fase correcta, y, 
            a través de una pantalla LCD se irán indicando los distintos modos de operación con la que estaremos 
            trabajando actualmente, donde, dichos modos, serán cambiados por medio de un pulsador 
            conectado al pin PD0 del ATmega328P (Antes de empezar es recomendable leer la sección <a style="text-decoration: none;" href="Manejo-de-la-pantalla-LCD.html">Manejo de la pantalla LCD</a>)
        </p>
        <ol>
            <li style="padding: 5px 0;">
                Comenzaremos con la función básica de establecer 
                un ciclo útil del 30% que se obtendrá por medio del 
                pin OC1B y en forma no invertida seleccionando una 
                resolución de 9 bits, este será nuestro primer modo 
                de operación
            </li>
            <li style="padding: 5px 0;">
                Nuestro segundo modo de operación consistirá en obtener un 
                ancho de pulso variable por medio del pin OC1B y en forma 
                no invertida con una resolución de 9 bits, comenzando desde 
                0%, que irá incrementándose poco a poco hasta llegar al 100%, 
                además, el porcentaje del ancho de pulso será visualizado a 
                través de la pantalla LCD
            </li>
            <li style="padding: 5px 0;">
                El tercer modo de operación consistirá en el control de la posición 
                de un Servomotor, esto se hará obteniendo la señal PWM por medio 
                del pin OC1A en forma no invertida con una resolución de 9 bits; 
                también se contará con dos pulsadores adicionales que se encargaran 
                de incrementar o decrementar la posición actual del servomotor, 
                pasando de -90º a 0º y luego a 90º o viceversa
            </li>
        </ol>
        <!-- -------------------------------------------------------------------------------------- -->
        <h3 class="jump" id="Diagrama-circuital">
           Diagrama circuital
        </h3>

        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\diagrama.png"
          alt="diagrama circuital en proteus"
          style="width: 68%; margin-top: 3% ;"
          class="resp1"
        />
        <p style="text-align: center; padding: 0; font-size: 13px">
          <i>Fuente: Elaboración propia</i>
        </p>
        <!-- -------------------------------------------------------------------------------------- -->
        <h3 class="jump" id="codigoEnC">
            Código en C
         </h3>

         <div class="code_panel">
            <div id="button1" onclick="CopyToClipboard('code_panel1')"><i class="far fa-copy"></i> copiar código</div>
            <code id="code_panel1">
                <span class="code_comment">/********* Conexiones a la pantalla LCD ****/</span></br>    
                <span class="define_include">#define</span> <span class="variables">D4</span> <span class="originalAVR">eS_PORTC0</span> <span class="code_comment">// D4 -> PORTC0</span></br>
                <span class="define_include">#define</span> <span class="variables">D5</span> <span class="originalAVR">eS_PORTC1</span> <span class="code_comment">// D5 -> PORTC1</span></br>
                <span class="define_include">#define</span> <span class="variables">D6</span> <span class="originalAVR">eS_PORTC2</span> <span class="code_comment">// D6 -> PORTC2</span></br>
                <span class="define_include">#define</span> <span class="variables">D7</span> <span class="originalAVR">eS_PORTC3</span> <span class="code_comment">// D7 -> PORTC3</span></br>
                <span class="define_include">#define</span> <span class="variables">RS</span> <span class="originalAVR">eS_PORTC4</span> <span class="code_comment">// RS -> PORTC4</span></br>
                <span class="define_include">#define</span> <span class="variables">EN</span> <span class="originalAVR">eS_PORTC5</span> <span class="code_comment">// E  -> PORTC5</span></br>
                <span class="code_comment">/*******************************************/</span></br><br>

                <span class="define_include">#define</span> <span class="variables">F_CPU</span> <span class="originalAVR">16000000UL</span> <span class="code_comment">// Frecuencia de trabajo del microcontrolador</span></br>
                <span class="define_include">#include</span> <span class="originalAVR">&lt;avr/io.h&gt;</span></br>
                <span class="define_include">#include</span> <span class="originalAVR">&lt;util/delay.h&gt;</span></br>      
                <span class="define_include">#include</span> <span class="originalAVR">&lt;stdlib.h&gt;</span></br> 
                <span class="define_include">#include</span> <span class = "include_lcd">"LCD_4bits.h"</span></br><br>

                <span class="define_include">uint8_t</span> <span class="originalAVR">Servo = 0;</span> <span class="code_comment">// Varaible para ajustar la posicion del servo</span></span></br>
                <span class="define_include">uint8_t</span> <span class="originalAVR">Modo = 0;</span> <span class="code_comment">// Variable para el modo de operacion</span></span></br>
                <span class="define_include">float</span> <span class="originalAVR">i = 0, Pos = 0;</span></br>
                <span class="define_include">char</span> <span class="originalAVR">Num[20];</span></br><br>

                <span class="define_include">void</span> <span class="functionsDeclarations"> Set</span><span class="originalAVR">() {</span> </br>
                <span style="margin-left: 1.5vw;"><span class="variables">DDRB</span> <span class="originalAVR">&=~ (1 &lt;&lt; 5) | (1 &lt;&lt; 4);</span></span> <span class="code_comment">//PB5 y PB4 como entradas</span></br>
                <span style="margin-left: 1.5vw;"><span class="variables">DDRB</span> <span class="originalAVR">= (1 &lt;&lt; 1) | (1 &lt;&lt; 2);</span></span> <span class="code_comment">// bit OC1A/OC1B como salida</span></br>
                <span style="margin-left: 1.5vw;"><span class="variables">PORTB</span> <span class="originalAVR">= (1 &lt;&lt; 5) | (1 &lt;&lt; 4);</span></span> <span class="code_comment">//resistencias de pullup activas</span></br>
                <span style="margin-left: 1.5vw;"><span class="variables">DDRD</span> <span class="originalAVR">&=~ (1 &lt;&lt; 0);</span></span> <span class="code_comment">//PD0 como entrada</span></br>
                <span style="margin-left: 1.5vw;"><span class="variables">PORTD</span> <span class="originalAVR">= (1 &lt;&lt; 0);</span></span> <span class="code_comment">//resistencia de pullup activa</span></br>
                <span style="margin-left: 1.5vw;"><span class="variables">DDRC</span> <span class="originalAVR">= 0xFF;</span></span> <span class="code_comment">//Puerto C como salida</span></br>
                <span style="margin-left: 1.5vw;" class="code_comment">/********** inicialización de la pantalla LCD *************/</span></br>
                <span class="functionsDeclarations" style="margin-left: 1.5vw;">Lcd4_Init</span> <span class="originalAVR">();</span></br>
                <span class="functionsDeclarations" style="margin-left: 1.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(1,0);</span></br>
                <span style="margin-left: 1.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Inicializando..."</span><span class="originalAVR">);</span></span></br>
                <span style="margin-left: 1.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(400);</span></span>  </br>
                <span style="margin-left: 1.5vw;" class="functionsDeclarations">Lcd4_Clear</span> <span class="originalAVR">();</span></br>
                <span style="margin-left: 1.5vw;" class="code_comment">/***********************************************************/</span></br>
                <span class="originalAVR">}</span></br><br>

                <span class="define_include">void</span> <span class="functionsDeclarations"> Inc_Servo</span><span class="originalAVR">() {</span> </br>
                <span class="define_include" style="margin-left: 1.5vw;">if</span> <span class="originalAVR">(!(</span><span class="define_include">PINB</span> <span class="originalAVR">& (1 &lt;&lt;</span> <span class="define_include">PORTB5</span><span class="originalAVR">))){</span> <span class="code_comment">//si se presiona el pulsador</span><br>
                <span style="margin-left: 2.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span> <span class="code_comment">// retardo antirebote</span> </br>
                <span style="margin-left: 2.5vw;" class="originalAVR">Servo += 1;</span> <span class="code_comment">//incrementa la variable</span></br>
                <span style="margin-left: 2.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(100);</span></span></br>
                <span style="margin-left: 1.5vw;" class="originalAVR">}</span></br>
                <span class="originalAVR">}</span></br><br>

                <span class="define_include">void</span> <span class="functionsDeclarations"> Dec_Servo</span><span class="originalAVR">() {</span> </br>
                <span class="define_include" style="margin-left: 1.5vw;">if</span> <span class="originalAVR">(!(</span><span class="define_include">PINB</span> <span class="originalAVR">& (1 &lt;&lt;</span> <span class="define_include">PORTB4</span><span class="originalAVR">))){</span> <span class="code_comment">//si se presiona el pulsador</span><br>
                <span style="margin-left: 2.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span> <span class="code_comment">// retardo antirebote</span> </br>
                <span style="margin-left: 2.5vw;" class="originalAVR">Servo -= 1;</span> <span class="code_comment">//incrementa la variable</span></br>
                <span style="margin-left: 2.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(100);</span></span></br>
                <span style="margin-left: 1.5vw;" class="originalAVR">}</span></br>
                <span class="originalAVR">}</span></br><br>

                <span class="define_include">void</span> <span class="functionsDeclarations"> Operacion</span><span class="originalAVR">() {</span> </br>
                <span class="define_include" style="margin-left: 1.5vw;">if</span> <span class="originalAVR">(!(</span><span class="define_include">PIND</span> <span class="originalAVR">& (1 &lt;&lt;</span> <span class="define_include">PORTD0</span><span class="originalAVR">))){</span> <span class="code_comment">//si se presiona el pulsador</span><br>
                <span style="margin-left: 2.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span> <span class="code_comment">// retardo antirebote</span> </br>
                <span style="margin-left: 2.5vw;" class="originalAVR">Modo += 1;</span> <span class="code_comment">// cambia el modo de operacion</span></br>
                <span style="margin-left: 2.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(100);</span></span></br>
                <span style="margin-left: 1.5vw;" class="originalAVR">}</span></br>
                <span style="margin-left: 1.5vw;"><span class="define_include">if</span><span class="originalAVR"> (Modo == 3) Modo = 0;</span></span>  </br>
                <span class="originalAVR">}</span></br><br>

                <span class="define_include">void</span> <span class="functionsDeclarations"> LCD</span><span class="originalAVR">() {</span> </br>
                <span class="functionsDeclarations" style="margin-left: 1.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(1,0);</span></br>
                <span style="margin-left: 1.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Modo de operacion:"</span><span class="originalAVR">);</span></span></br>
                <span style="margin-left: 1.5vw;"><span class="functionsDeclarations">itoa</span><span class="originalAVR">(Modo, Num, 10);</span></span><span class="code_comment"> // convierte el numero tipo entero a String con base decimal (10)</span></br>
                <span class="functionsDeclarations" style="margin-left: 1.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(1,19);</span></br>
                <span style="margin-left: 1.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(Num);</span></span></br>
                <span style="margin-left: 1.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(100);</span></span></br>
                <span class="originalAVR">}</span></br><br>

                <span class="define_include">void</span> <span class="functionsDeclarations">positionServo</span><span class="originalAVR">(</span><span class="define_include">int</span> <span class="originalAVR">x,</span> <span class="define_include">int</span> <span class="originalAVR">p</span><span class="originalAVR">){</span></br>
                <span style="margin-left: 1.5vw;" class="variables">OCR1A</span> <span class="originalAVR"> = x;</span><br>
                <span class="originalAVR" style="margin-left: 1.5vw;">Pos</span> <span class="originalAVR"> = p;</span><br>
                <span style="margin-left: 1.5vw;"><span class="functionsDeclarations">dtostrf</span><span class="originalAVR">(Pos, 3, 0, Num);</span></span> <span class="code_comment">// Convierte el numero tipo float en string</span></br>
                <span class="functionsDeclarations" style="margin-left: 1.5vw;">Lcd4_Set_Cursor</span><span class="originalAVR">(2,10);</span></br>
                <span style="margin-left: 1.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(Num);</span></span></br>
                <span class="originalAVR">}</span></br><br>

                <span class="define_include">int</span> <span class="functionsDeclarations">main</span><span class="originalAVR">(</span><span class="define_include">void</span><span class="originalAVR">)</span> <span class="originalAVR">{</span></br>
                <span style="margin-left: 1.5vw;" class="functionsDeclarations"> Set</span><span class="originalAVR">();</span><br>
                <span style="margin-left: 1.5vw;" class="define_include" style="margin-left: 1.5vw;">while</span> <span class="originalAVR">(1) {</span></br>
                <span class="define_include" style="margin-left: 2.5vw;">if</span> <span class="originalAVR">(Modo == 0){</span><br>
                  <span style="margin-left: 3.5vw;" class="variables">TCCR1A</span> <span class="originalAVR"> = 0b00100010;</span> <span class="code_comment">//PWM por el pin OC1B, no invertido, PWM modo fase correcta 9bits</span></br>
                  <span style="margin-left: 3.5vw;" class="variables">TCCR1B</span> <span class="originalAVR"> = 0b00000100;</span> <span class="code_comment">//PWM modo fase correcta de 9 bits, prescaler de 256</span></br>
                  <span style="margin-left: 3.5vw;" class="variables">OCR1B</span> <span class="originalAVR"> = 177;</span></br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations">Lcd4_Clear</span> <span class="originalAVR">();</span></br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations"> LCD</span><span class="originalAVR">();</span><br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,5);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Pin: OC1B"</span><span class="originalAVR">);</span></span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(200);</span></span></br>
                <span style="margin-left: 2.5vw;" class="originalAVR">}</span></br>
                <span class="define_include" style="margin-left: 2.5vw;">while</span> <span class="originalAVR">(Modo == 0){</span><span class="code_comment">// Modo de operacion #0: ancho de pulso fijo a 30%</span><br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations"> Operacion</span><span class="originalAVR">();</span><br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(1,0);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Ancho de pulso fijo "</span><span class="originalAVR">);</span></span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,0);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Ciclo util: 30%"</span><span class="originalAVR">);</span></span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span></br>
                <span style="margin-left: 2.5vw;" class="originalAVR">}</span></br><br>

                <span class="define_include" style="margin-left: 2.5vw;">if</span> <span class="originalAVR">(Modo == 1){</span><br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations">Lcd4_Clear</span> <span class="originalAVR">();</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span></br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations"> LCD</span><span class="originalAVR">();</span><br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,5);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Pin: OC1B"</span><span class="originalAVR">);</span></span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(200);</span></span></br>
                  <span style="margin-left: 3.5vw;" class="variables">OCR1B</span> <span class="originalAVR"> = 0;</span></br>
                <span style="margin-left: 2.5vw;" class="originalAVR">}</span></br>
                <span class="define_include" style="margin-left: 2.5vw;">while</span> <span class="originalAVR">(Modo == 1){</span><span class="code_comment">// Modo de operacion #1: Ancho de pulso variable</span><br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations"> Operacion</span><span class="originalAVR">();</span><br>
                  <span style="margin-left: 3.5vw;" class="variables">OCR1B</span> <span class="originalAVR"> += 10;</span> <span class="code_comment">//Incremento del ciclo util</span></br>
                  <span style="margin-left: 3.5vw;"><span class="define_include">if</span><span class="originalAVR"> (<span class="variables">OCR1B</span> >= 511) <span class="variables">OCR1B</span> = 0;</span></span>  </br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(1,0);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Ancho de pulso­­­­ ......"</span><span class="originalAVR">);</span></span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,0);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"variable:"</span><span class="originalAVR">);</span></span></br>
                  <span style="margin-left: 3.5vw;" class="originalAVR">i = (</span><span class="variables">OCR1B</span><span class="originalAVR"> / 511.0) * 100.0;</span> <span class="code_comment">//Porcentaje del ancho de pulso</span><br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">dtostrf</span><span class="originalAVR">(i, 3, 0, Num);</span></span> <span class="code_comment">// Convierte el numero tipo float en string</span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,9);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(Num);</span></span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,12);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"% "</span><span class="originalAVR">);</span></span></br>
                  <span style="margin-left: 3.5vw;"><span class="define_include">if</span><span class="originalAVR"> (i >= 100) i = 0;</span></span>  </br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(200);</span></span></br>
                <span style="margin-left: 2.5vw;" class="originalAVR">}</span></br><br>

                <span class="define_include" style="margin-left: 2.5vw;">if</span> <span class="originalAVR">(Modo == 2){</span><br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations">Lcd4_Clear</span><span class="originalAVR">();</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span></br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations"> LCD</span><span class="originalAVR">();</span><br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,5);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Pin: OC1A"</span><span class="originalAVR">);</span></span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(500);</span></span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,0);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Posicion: "</span><span class="originalAVR">);</span></span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(1,0);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">"Control Servomotor "</span><span class="originalAVR">);</span></span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(1,19);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_String</span> <span class="originalAVR">(</span><span class = "include_lcd">" "</span><span class="originalAVR">);</span></span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span></br>
                  <span style="margin-left: 3.5vw;" class="variables">TCCR1A</span> <span class="originalAVR"> = 0b10000010;</span> <span class="code_comment">//PWM por el pin OC1A, no invertido, PWM modo fase correcta 9bits</span></br>
                  <span style="margin-left: 3.5vw;" class="variables">TCCR1B</span> <span class="originalAVR"> = 0b00000100;</span> <span class="code_comment">//PWM modo fase correcta de 9 bits, prescaler de 256</span></br>
                  <span style="margin-left: 3.5vw;" class="variables">OCR1A</span> <span class="originalAVR"> = 0;</span></br>
                  <span class="functionsDeclarations" style="margin-left: 3.5vw;">Lcd4_Set_Cursor</span> <span class="originalAVR">(2,13);</span></br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">Lcd4_Write_Char</span> <span class="originalAVR">(223);</span></span><span class="code_comment">// se muestra el simbolo º para los grados del servomotor</span></br>
                <span style="margin-left: 2.5vw;" class="originalAVR">}</span></br>
                <span class="define_include" style="margin-left: 2.5vw;">while</span> <span class="originalAVR">(Modo == 2){</span><span class="code_comment"> //Modo de operacion #2: Control del servomotor</span><br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations"> Operacion</span><span class="originalAVR">();</span><br>
                  <span style="margin-left: 3.5vw;"><span class="functionsDeclarations">_delay_ms</span><span class="originalAVR">(50);</span></span></br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations"> Inc_Servo</span><span class="originalAVR">();</span><br>
                  <span style="margin-left: 3.5vw;" class="functionsDeclarations"> Dec_Servo</span><span class="originalAVR">();</span><br>
                  <span style="margin-left: 3.5vw;"><span class="define_include">if</span><span class="originalAVR"> (Servo >= 2) Servo = 2;</span></span> <span class="code_comment">//limite de la posicion maxima del servo</span>  </br>
                  <span style="margin-left: 3.5vw;"><span class="define_include">if</span><span class="originalAVR"> (Servo &lt;= 0) Servo = 0;</span></span> <span class="code_comment">//limite de la posicion minima del servo</span>  </br>
                  <span class="define_include" style="margin-left: 3.5vw;">switch</span> <span class="originalAVR">(Servo){</span></br>
                    <span class="define_include" style="margin-left: 4.5vw;">case</span> <span class="originalAVR">(0):</span>
                    <span class="functionsDeclarations">positionServo</span><span class="originalAVR">(31, -90);</span>
                    <span class="define_include">break</span><span class="originalAVR">;</span> <span class="code_comment">//posicion del servo a -90 grados</span><br>
                    <span class="define_include" style="margin-left: 4.5vw;">case</span> <span class="originalAVR">(1):</span>
                    <span class="functionsDeclarations">positionServo</span><span class="originalAVR">(47, 0);</span>
                    <span class="define_include">break</span><span class="originalAVR">;</span> <span class="code_comment">//posicion del servo a 0 grados</span><br>
                    <span class="define_include" style="margin-left: 4.5vw;">case</span> <span class="originalAVR">(2):</span>
                    <span class="functionsDeclarations">positionServo</span><span class="originalAVR">(62, 90);</span>
                    <span class="define_include">break</span><span class="originalAVR">;</span> <span class="code_comment">//posicion del servo a +90 grados</span><br>
                  <span style="margin-left: 3.5vw;" class="originalAVR">}</span></br>
                  <span style="margin-left: 2.5vw;" class="originalAVR">}</span></br>
                  <span style="margin-left: 1.5vw;" class="originalAVR">}</span></br>
                  <span class="originalAVR">}</span></br>
            </code>
         </div>
        
        <!-- -------------------------------------------------------------------------------------- -->
         <h4 style="margin-top: 3%;" class="jump" id="operacion0">
          Modo de operación 0, ancho de pulso fijo
        </h4>
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\modo0.gif"
          alt="PWM modo fase correcta Timer1"
          style="width: 75%"
          class="resp1"
        />
        <!-- -------------------------------------------------------------------------------------- -->
        <h4 style="margin-top: 3%;" class="jump" id="operacion1">
          Modo de operación 1, ancho de pulso variable
        </h4>
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\modo1.gif"
          alt="PWM modo fase correcta Timer1"
          style="width: 75%"
          class="resp1"
        />
        <!-- -------------------------------------------------------------------------------------- -->
        <h4 style="margin-top: 3%;" class="jump" id="operacion2">
          Modo de operación 2, control del Servomotor
        </h4>
        <img
          src="..\Imagenes\PWM-Timer1-faseCorrecta\modo2.gif"
          alt="PWM modo fase correcta Timer1"
          style="width: 75%"
          class="resp1"
        />


        <!-- -------------------------------------------------------------------------------------- -->
        <div
          style="
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(0, 0, 0, 0.125);
            border-radius: 0.25rem;
            margin-top: 20px;
          "
        >
          <div
            class="card"
            style="
              cursor: pointer;
              transition: 0.3s;
              padding: 0.5rem 1rem;
              background-color: rgba(0, 0, 0, 0.03);
              border-bottom: 1px solid rgba(0, 0, 0, 0.125);
            "
          >
            <h2 style="margin: 0">
              <a
                class="ref"
                style="
                  margin: 0;
                  text-decoration: none;
                  color: black;
                  transition: 0.3s;
                "
                >Referencias</a
              >
            </h2>
          </div>
          <div class="collapse" style="transition: height 200ms">
            <div style="flex: 1 1 auto; padding: 1rem 1rem">
              <ol class="list">
                <li>
                  8-bit AVR Microcontroller with 32K Bytes In-System
                  Programmable Flash.
                  <a
                    style="text-decoration: none"
                    href="https://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-7810-Automotive-Microcontrollers-ATmega328P_Datasheet.pdf"
                    >DataSheet</a
                  >.
                </li>
                
              </ol>
            </div>
          </div>
        </div>
        <style>
          .collapse.vis {
            display: block;
            transition: 0.3s;
          }
          .collapse {
            display: none;
            transition: 0.3s ease-in-out;
          }
        </style>
        <!-- -------------------------------------------------------------------------------------- -->
      </div>

      <footer
        class="container-fluid bg-grey"
        style="padding-top: 0px; padding-left: 0"
      >
        <div class="container">
          <!--primera columna-->
          <div class="col">
            <div class="your-item">
              <img
                src="../Imagenes/Facultad-de-ingenieria.png"
                class="logo-footer"
                style="display: block; margin: 15px auto"
              />
              <p class="styleFooter">Universidad de Carabobo</p>
              <p class="styleFooter">Facultad de Ingeniería</p>
              <p class="styleFooter">Escuela de Ingenieria Eléctrica</p>
              <p id="TTO" class="styleFooter">Dpto. de Sistemas y Automática</p>
              <p class="styleFooter">© 2021</p>
            </div>
          </div>

          <!--segunda columna-->
          <div class="col">
            <h6
              id="brand"
              style="display: block; text-align: center; margin-bottom: 0"
            >
              Microprocesadores
            </h6>
            <h6 style="display: block; text-align: center; margin-bottom: 20px">
              SA7E04
            </h6>
            <p style="display: block; text-align: center">
              Prof: Whendy Garcia.
            </p>
            <a href="mailto: whendygarcia@gmail.com" class="btn-footer"
              >Enviar un correo</a
            ><br />
            <a href="https://www.arduino.cc/" class="btn-footer" target="_blank"
              >Ir a: Arduino - Home
            </a>
          </div>

          <!--tercera columna-->
          <div class="col">
            <h6 style="margin-top: 10%">Búsqueda</h6>
            <div class="social">
              <a
                href="https://instagram.com/electricaing_uc?igshid=1grr9yjuz5rk3"
                target="_blank"
                title="Instagram"
                ><i class="fab fa-instagram"></i
              ></a>
              <a
                href="https://www.facebook.com/groups/35195859789/?ref=share"
                target="_blank"
                title="Facebook"
                ><i class="fab fa-facebook-square"></i
              ></a>
              <a
                href="https://twitter.com/electricaing_uc?s=20"
                target="_blank"
                title="Twitter"
                ><i class="fab fa-twitter-square"></i
              ></a>
              <a
                href="https://youtube.com/channel/UC-zreC_L2Uqd7vYe4GNi1Hw"
                target="_blank"
                title="YouTube"
                ><i class="fab fa-youtube"></i
              ></a>
            </div>
            <form class="form-footer my-3" style="margin-bottom: 0 !important">
              <input type="text" placeholder="search here...." name="search" />
              <button id="go"><i class="fa fa-search"></i></button>
            </form>
            <p
              class="subTitle"
              style="
                font-style: italic;
                margin-bottom: 0;
                padding-bottom: 0;
                padding-top: 5%;
              "
            >
              Realizado por:
            </p>
            <p style="font-style: italic; padding: 0; margin-bottom: 0">
              Victor Ojeda, Gilberto Virguez
            </p>
          </div>
        </div>
      </footer>

      <!-- floating button <a href="mailto: vctrinox@gmail.com" class="float"><i class="fa fa-envelope my-float"></i></a>-->
      <div class="action" onclick="actionToggle()">
        <span>+</span>
        <ul
          style="
            font-family: 'Roboto', sans-serif;
            height: 100vw;
            overflow: auto;
          "
        >
        <li class="afterICon">
          <a class="icon"><b>PWM Timer 1</b></a>
        </li>
        
          <li><a href="#PWM-timer1">PWM Modo: Fase correcta</a></li>
          <li>
            <a href="#frecuencia-periodo"
              >Frecuencia y periodo de la señal PWM</a
            >
          </li>
        

        <li class="afterICon">
          <a class="icon"
            ><b>Obtener la señal PWM</b></a
          >
        </li>
        
          <li><a href="#obtenerSeñalPWM">Obtención de la señal</a></li>
          <li>
            <a href="#señalNoInvertida">Señal no invertida</a>
          </li>
          <li><a href="#señalInvertida">Señal Invertida</a></li>
          <li><a href="#anchoDePulso">Ancho de pulso</a></li>
        

        <li class="afterICon">
          <a class="icon"
            ><b>Configuración de registros</b></a
          >
        </li>
        
          <li><a href="#TCCR1A">Registro TCCR1A</a></li>
          <li>
            <a href="#TCCR1B">Registro TCCR1B</a>
          </li>
          <li><a href="#Resolucion">Registro TCCR1A y TCCR1B: Resolución</a></li>
          <li><a href="#OCR1A-OCR1B">Registro OCR1A y Registro OCR1B</a></li>
        

        <li class="afterICon">
          <a class="icon"><b>Ejemplo</b></a>
        </li>
        
          <li><a href="#Descripcion">Descripción</a></li>
          <li><a href="#Diagrama-circuital">Diagrama circuital</a></li>
          <li><a href="#codigoEnC">Código en C</a></li>
          <li>
            <a href="#operacion0">Modo de operación 0, ancho de pulso fijo</a>
          </li>
          <li>
            <a href="#operacion1"
              >Modo de operación 1, ancho de pulso variable</a
            >
          </li>
          <li><a href="#operacion2">Modo de operación 2, control del Servomotor</a></li>
        
        </ul>
      </div>
      <!-- End of floating button -->
    </div>
  </body>
</html>
